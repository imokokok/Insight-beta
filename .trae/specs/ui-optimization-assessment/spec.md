# Web3数据分析平台UI优化评估 Spec

## Why

参照 Dune Analytics、Nansen、DeFiLlama、Arkham、DEX Screener 等主流Web3数据分析平台的设计理念，评估当前Oracle数据分析平台的UI设计、架构、布局和交互，找出真正值得优化的地方，避免过度设计。

## What Changes

- 评估并优化数据表格交互体验
- 优化图表时间范围选择交互
- 增强移动端触摸手势体验
- 优化实时数据更新视觉反馈
- 评估用户引导流程

## Impact

- Affected specs: navigation-ui-optimization (已完成)
- Affected code:
  - `src/components/ui/table.tsx`
  - `src/components/charts/`
  - `src/features/comparison/components/VirtualTable.tsx`
  - `src/app/globals.css`

## 评估发现

### 1. 已做得很好的部分 ✅

#### 1.1 导航系统

- 侧边栏分组清晰，有活跃状态指示
- 移动端汉堡菜单实现完善
- 键盘快捷键支持 (Cmd/Ctrl + K)
- 页面标题统一处理

#### 1.2 视觉设计

- 深色主题配色专业，符合Web3数据分析平台调性
- 玻璃拟态效果现代感强
- 动画效果丰富但不过度
- 响应式设计基础扎实

#### 1.3 数据展示

- StatCard组件功能丰富（趋势、迷你图、状态）
- 图表组件封装完善
- 骨架屏加载状态
- 错误边界处理

#### 1.4 国际化

- 完整的多语言支持
- 语言切换器

### 2. 值得优化的部分 🔧

#### 2.1 数据表格交互（优先级：高）

**现状问题：**

- `VirtualTable.tsx` 功能较基础
- 缺少列排序视觉指示器
- 缺少列宽调整功能
- 缺少列可见性控制

**主流平台参考：**

- Dune Analytics: 列排序、列隐藏、列宽调整
- DeFiLlama: 紧凑/宽松视图切换
- Nansen: 列配置保存

**建议优化：**

- 添加排序指示器（升序/降序图标）
- 添加列可见性控制下拉菜单
- 添加紧凑/宽松视图切换
- 优化虚拟滚动性能

#### 2.2 图表时间范围选择（优先级：中）

**现状问题：**

- 时间范围选择器分散在各组件中
- 缺少快捷时间范围按钮组（1H, 24H, 7D, 30D, ALL）
- 缺少自定义时间范围选择器

**主流平台参考：**

- DEX Screener: 底部时间范围快捷按钮
- TradingView: 时间范围选择器 + 自定义日期
- Arkham: 时间范围滑块

**建议优化：**

- 创建统一的 `TimeRangeSelector` 组件
- 支持快捷按钮 + 自定义日期范围
- 支持时间范围同步（跨图表）

#### 2.3 实时数据更新指示（优先级：中）

**现状问题：**

- 有 `RefreshIndicator` 组件但视觉不够突出
- 价格闪烁动画存在但效果可增强
- 缺少"实时模式"切换

**主流平台参考：**

- DEX Screener: 实时价格更新动画
- Binance: 实时数据流指示器
- Coinbase: 实时连接状态

**建议优化：**

- 增强实时更新指示器视觉效果
- 添加"实时模式"开关（自动刷新 vs 手动）
- 优化价格变化动画

#### 2.4 移动端触摸手势（优先级：低）

**现状问题：**

- 移动端基础适配完善
- 缺少下拉刷新
- 缺少图表双指缩放
- 缺少滑动返回

**主流平台参考：**

- DEX Screener Mobile: 下拉刷新、图表缩放
- Uniswap Mobile: 滑动交互

**建议优化：**

- 添加下拉刷新手势支持
- 考虑图表双指缩放（可选）

#### 2.5 用户引导流程（优先级：低）

**现状问题：**

- 有 `WelcomeGuide` 组件但使用有限
- 缺少功能发现提示
- 缺少首次访问引导

**主流平台参考：**

- Dune Analytics: 新用户引导流程
- Nansen: 功能提示气泡

**建议优化：**

- 完善首次访问引导流程
- 添加功能发现提示（Feature Discovery）

### 3. 不建议优化的部分 ❌

#### 3.1 主题切换（深色/浅色）

- 当前深色主题符合Web3数据分析平台定位
- 主流平台多为深色主题
- 维护成本高，收益低

#### 3.2 自定义仪表盘

- 实现复杂度高
- 当前布局已足够灵活
- 用户需求不明确

#### 3.3 复杂图表交互（缩放、拖拽、绘图工具）

- Recharts 不原生支持
- 实现成本高
- 非核心功能

#### 3.4 社交功能（分享、评论）

- 非数据分析平台核心功能
- 增加复杂度

## ADDED Requirements

### Requirement: 数据表格增强交互

系统应提供增强的数据表格交互功能，提升数据分析效率。

#### Scenario: 列排序

- **WHEN** 用户点击表头
- **THEN** 显示排序方向指示器，数据按该列排序

#### Scenario: 列可见性控制

- **WHEN** 用户点击列配置按钮
- **THEN** 显示列可见性控制菜单，用户可隐藏/显示列

#### Scenario: 视图密度切换

- **WHEN** 用户切换紧凑/宽松视图
- **THEN** 表格行高和间距相应调整

### Requirement: 统一时间范围选择器

系统应提供统一的时间范围选择组件，支持快捷选择和自定义范围。

#### Scenario: 快捷时间范围选择

- **WHEN** 用户点击时间范围快捷按钮（1H, 24H, 7D, 30D, ALL）
- **THEN** 图表数据更新为对应时间范围

#### Scenario: 自定义时间范围

- **WHEN** 用户选择自定义时间范围
- **THEN** 显示日期选择器，用户可选择起止日期

### Requirement: 增强实时数据指示

系统应提供更明显的实时数据更新视觉反馈。

#### Scenario: 实时模式切换

- **WHEN** 用户开启实时模式
- **THEN** 数据自动刷新，显示实时连接指示器

#### Scenario: 价格变化动画

- **WHEN** 价格发生变化
- **THEN** 显示颜色闪烁动画（绿色上涨，红色下跌）

## MODIFIED Requirements

无

## REMOVED Requirements

无
